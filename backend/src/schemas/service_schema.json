{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ServiceYukpo",
  "type": "object",
  "required": ["is_tarissable", "titre_service", "category"],

  "properties": {
    "category": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["string", "number", "boolean", "array", "int", "float", "bool"] },
        "valeur": {},
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    },
    "titre_service": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["string", "number", "boolean", "array", "int", "float", "bool"] },
        "valeur": {},
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    },
    "is_tarissable": {
      "oneOf": [
        { "type": "boolean" },
        {
          "type": "object",
          "required": ["type_donnee", "valeur", "origine_champs"],
          "properties": {
            "type_donnee": { "type": "string", "enum": ["boolean", "bool"] },
            "valeur": { "type": "boolean" },
            "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
          },
          "additionalProperties": true
        }
      ]
    },


    "description": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["string", "number", "boolean", "array", "int", "float", "bool"] },
        "valeur": {},
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    },
    "listeproduit": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["listeproduit"] },
        "valeur": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "nom": { 
                "oneOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["string"] },
                      "valeur": { "type": "string" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "categorie": { "type": "string" },
              "nature_produit": { "type": "string" },
              "quantite": {
                "oneOf": [
                  { "type": "number" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["number"] },
                      "valeur": { "type": "number" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "unite": {
                "oneOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["string"] },
                      "valeur": { "type": "string" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "prix": {
                "oneOf": [
                  { "type": "number" },
                  {
                    "type": "object",
                    "required": ["montant", "devise"],
                    "properties": {
                      "montant": { "type": "number" },
                      "devise": { "type": "string" }
                    },
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["number", "object"] },
                      "valeur": {
                        "oneOf": [
                          { "type": "number" },
                          {
                            "type": "object",
                            "required": ["montant", "devise"],
                            "properties": {
                              "montant": { "type": "number" },
                              "devise": { "type": "string" }
                            },
                            "additionalProperties": false
                          }
                        ]
                      },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "marque": { "type": "string" },
              "origine": { "type": "string" },
              "occasion": { "type": "boolean" },
              "est_tarissable": { "type": "boolean" },
              "vitesse_tarissement": { "type": "string" },
              "etat": {
                "oneOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["dropdown"] },
                      "valeur": { "type": "string" },
                      "options": { "type": "array", "items": { "type": "string" } },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              }
            }
          }
        },
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    },
    "reponse_intelligente": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["string", "number", "boolean", "array", "int", "float", "bool"] },
        "valeur": {},
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    },
    "vitesse_tarissement": { 
      "oneOf": [
        { "type": "string", "enum": ["lente", "moyenne", "rapide"] },
        {
          "type": "object",
          "required": ["type_donnee", "valeur", "origine_champs"],
          "properties": {
            "type_donnee": { "type": "string", "enum": ["string"] },
            "valeur": { "type": "string", "enum": ["lente", "moyenne", "rapide"] },
            "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
          },
          "additionalProperties": true
        }
      ]
    },
    "gps": {
      "oneOf": [
        { "type": "boolean" },
        {
          "type": "object",
          "required": ["type_donnee", "valeur", "origine_champs"],
          "properties": {
            "type_donnee": { "type": "string", "enum": ["boolean", "bool", "object"] },
            "valeur": { "type": ["boolean", "object"] },
            "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
          },
          "additionalProperties": true
        },
        {
          "type": "object",
          "required": ["lat", "lon"],
          "properties": {
            "lat": { "type": "number", "minimum": -90, "maximum": 90 },
            "lon": { "type": "number", "minimum": -180, "maximum": 180 },
            "origine_champs": { "type": "string" }
          },
          "additionalProperties": true
        }
      ]
    },
    "gps_fixe": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["gps", "string"] },
        "valeur": { "type": ["string", "null"] },
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    },
    "gps_coords": { "type": "string", "pattern": "^-?\\d+(?:\\.\\d+)?,-?\\d+(?:\\.\\d+)?$" },
    "active_days": { "type": "integer", "minimum": 1, "maximum": 30 },
    "etat_bien": { "type": "string", "enum": ["neuf", "occasion"] },
    "etat_bien_type": { "type": "string", "enum": ["dropdown"] },
    "etat_bien_options": { "type": "array", "items": { "type": "string" } },
    "sous_categorie": { "type": "string" },
    "produits": {
      "type": "object",
      "required": ["type_donnee", "valeur", "origine_champs"],
      "properties": {
        "type_donnee": { "type": "string", "enum": ["listeproduit"] },
        "valeur": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "nom": {
                "oneOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["string"] },
                      "valeur": { "type": "string" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "description": {
                "oneOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["string"] },
                      "valeur": { "type": "string" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "prix": {
                "oneOf": [
                  { "type": "number" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["number"] },
                      "valeur": { "type": "number" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "quantite": {
                "oneOf": [
                  { "type": "number" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["number"] },
                      "valeur": { "type": "number" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              },
              "categorie": {
                "oneOf": [
                  { "type": "string" },
                  {
                    "type": "object",
                    "required": ["type_donnee", "valeur", "origine_champs"],
                    "properties": {
                      "type_donnee": { "type": "string", "enum": ["string"] },
                      "valeur": { "type": "string" },
                      "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
                    },
                    "additionalProperties": true
                  }
                ]
              }
            }
          }
        },
        "origine_champs": { "type": ["string", "array"], "items": { "type": "string" } }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}


